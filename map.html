<!DOCTYPE html>
<html lang="en">
<head>
    <title>Animalies</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- UIKIT -->
    <link rel="stylesheet" href="UIKIT/css/uikit.css" />
    <script src="UIKIT/js/uikit.js"></script>
    <script src="UIKIT/js/uikit-icons.js"></script>

    <!-- PERSO -->
    <link rel="stylesheet" href="PERSO/css/style.css" />
    <script src="PERSO/js/script.js"></script>

    <!-- Chart -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>

</head>
<body>

    <!-- NAVBAR -->
    <div uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky">
        <nav class="uk-navbar-container uk-margin uk-margin-remove-bottom" uk-navbar>
            <div class="uk-navbar-left uk-margin-medium-left">
                <a class="uk-icon" uk-icon="icon: menu" uk-toggle="target: #offcanvas-push"></a>
            </div>
            <div class="uk-navbar-center">
                <img src="IMG/Animalies-Logo.png" alt="Logo">
            </div>
            <div class="uk-navbar-right uk-margin-medium-right">
                <ul class="uk-navbar-nav">
                    <li>
                        <a href="#"><span class="uk-icon" uk-icon="icon: bell" uk-tooltip="title: Notifications; delay: 50"></span></a>
                    </li>
                    <li>
                        <a href="#"><span class="uk-icon" uk-icon="icon: user" uk-tooltip="title: Profil; delay: 50"></span></a>
                    </li>
                    <li>
                        <a href="#"><span class="uk-icon" uk-icon="icon: sign-out" uk-tooltip="title: Déconnexion; delay: 50"></span></a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
    
    <!-- MENU -->
    <div id="offcanvas-push" uk-offcanvas="mode: push; overlay: true">
        <div class="uk-offcanvas-bar">
    
            <button class="uk-offcanvas-close" type="button" uk-close></button>
    
            <ul class="uk-nav-default uk-nav-parent-icon" uk-nav>
                <li class="uk-logo uk-text-center"><img src="IMG/Animalies-Logo.png" alt="Logo"  width="200"></li>


                <li class="uk-nav-header uk-margin-small-top"><a href="#"><span class="uk-margin-small-right" uk-icon="icon: list"></span> Datasets</a></li>
                <li class="uk-nav-divider"></li>
                <li class="uk-margin-medium-left"><a href="import.html">Import a dataset</a></li>
                <li class="uk-margin-medium-left"><a href="datasets.html">Your datasets</a></li>

                
                <li class="uk-nav-header uk-margin-small-top"><span class="uk-margin-small-right" uk-icon="icon: location"></span> Visualization on map</li>
                <li class="uk-nav-divider"></li>
                <li class="uk-margin-medium-left"><a href="map.html">Monitoring</a></li>


                <li class="uk-nav-header"><a href="#"><span class="uk-margin-small-right" uk-icon="icon: user"></span> Compte</a></li>
                <li class="uk-nav-header uk-margin-remove-top"><a href="#"><span class="uk-margin-small-right" uk-icon="icon: cog"></span> Paramètres</a></li>
                <li class="uk-nav-header uk-margin-remove-top"><a href="#"><span class="uk-margin-small-right" uk-icon="icon: question"></span> Aide</a></li>
            </ul>
        </div>
    </div>

    <!-- BODY -->
    <div class="uk-container uk-container-xlarge">
        <h1 class="uk-heading-medium uk-text-center uk-margin-medium-top">Monitoring</h1>
        <div class="uk-grid-medium uk-grid-match uk-child-width-expand@s uk-text-center uk-margin-medium-top" uk-grid>
            <div class="uk-width-3-5@m uk-grid-margin">
                <div class="uk-panel">
                    <div class="uk-box-shadow-large" id="mapid" style="height: 680px; width: 850px;"></div>
                </div>
                <script>
                    window.addEventListener("load", function setup_map(){
                        const userAction = async () => {
                            // const response = await fetch('http://localhost:5000/elephants/LA1');
                            // const elephants = await response.json(); //extract JSON from the http response
                            var mymap = L.map('mapid').setView([-19.06372477, 16.20208842], 8);

                            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
                                maxZoom: 18,
                                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                                    '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                                    'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                                id: 'mapbox/streets-v11',
                                tileSize: 512,
                                zoomOffset: -1
                            }).addTo(mymap);
                            // line = []
                            // for (i = 0; i < elephants.length; i++) {
                            //     var e = elephants[i];
                            //     line.push([e.latitude, e.longitude])
                            //     // var marker = L.marker([e.latitude, e.longitude]).addTo(mymap);
                            //     // var circle = L.circle([e.latitude, e.longitude], {
                            //     //     color: 'red',
                            //     //     fillColor: '#f03',
                            //     //     fillOpacity: 0.5,
                            //     //     radius: 500
                            //     // }).addTo(mymap);
                            // }
                            // var startMarker = L.marker([elephants[0].latitude, elephants[0].longitude]).addTo(mymap);
                            // startMarker.bindPopup("<b>Start</b>").openPopup();
                            // var endMarker = L.marker([elephants[elephants.length-1].latitude, elephants[elephants.length-1].longitude]).addTo(mymap);
                            // endMarker.bindPopup("<b>End</b>").openPopup();
                            // var polyline = L.polyline(line, {color: 'red'}).addTo(mymap);
                        }
                        userAction();
                    })
                </script>
            </div>
            <div class="uk-width-2-5@m uk-grid-margin">
                <div class="uk-width-1-1@m uk-grid-margin">
                    <canvas id="myChart" height="90"></canvas>
                    <script>
                    var ctx = document.getElementById('myChart').getContext('2d');
                    Chart.defaults.global.legend.display = false;
                    var myChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['00', '01', '02', '03', '04', '05','06', '07', '08', '09', '10', '11',
                                        '12', '13', '14', '15', '17', '18','19', '20', '21', '22', '23'],
                            datasets: [{
                                data: [3, 4, 6, 7, 5, 4, 8, 4, 3, 5, 18, 30, 19, 9, 6, 7, 8, 4, 6, 7, 4, 5, 8],
                                backgroundColor: [
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(255, 99, 132, 0.2)',
                                ],
                                borderColor: [
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(255, 99, 132, 1)',
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                yAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    },
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Displacement (km)'
                                    }
                                }],
                                xAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    },
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Time (h)'
                                    }
                                }]
                            }
                        }
                    });
                    </script>
                </div>
                <div class="uk-width-1-1@m uk-grid-margin">
                    <canvas id="myChart1" height="90"></canvas>
                    <script>
                    var ctx = document.getElementById('myChart1').getContext('2d');
                    var myChart1 = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['00', '01', '02', '03', '04', '05','06', '07', '08', '09', '10', '11',
                                        '12', '13', '14', '15', '17', '18','19', '20', '21', '22', '23'],
                            datasets: [{
                                data: [115, -72, -100, 88, 104, -89, 98, -86, -112, 87, 3, 2, 1, 88, -96, 79, 105, -89, -99, 79, 103, -76, -103, -78],
                                backgroundColor: [
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(54, 162, 235, 0.2)'
                                ],
                                borderColor: [
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(54, 162, 235, 1)'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                yAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    },
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Turning angle (°)'
                                    }
                                }],
                                xAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    },
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Time (h)'
                                    }
                                }]
                            }
                        }
                    });
                    </script>
                </div>
                <div class="uk-width-1-1@m uk-grid-margin">
                    <canvas id="myChart2" height="90"></canvas>
                    <script>
                    var ctx = document.getElementById('myChart2').getContext('2d');
                    var myChart2 = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['00', '01', '02', '03', '04', '05','06', '07', '08', '09', '10', '11',
                                        '12', '13', '14', '15', '17', '18','19', '20', '21', '22', '23'],
                            datasets: [{
                                label: '# of Votes',
                                data: [-83, -72, 76, 78, 71, -89, 78, 76, -77, -87, 145, 150, 146, -82, -79, 76, 78, -81, -72, 79, 67, -81, 74, 78],
                                backgroundColor: [
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)',
                                    'rgba(204, 101, 254, 0.2)'
                                ],
                                borderColor: [
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)',
                                    'rgba(204, 101, 254, 1)'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                yAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    },
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Absolue angle (°)'
                                    }
                                }],
                                xAxes: [{
                                    ticks: {
                                        beginAtZero: true
                                    },
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Time (h)'
                                    }
                                }]
                            }
                        }
                    });
                    </script>
                </div>
            </div>
        </div>
    </div>
</body>
</html>